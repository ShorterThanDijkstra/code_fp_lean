<!DOCTYPE html>
<html>
  <head>
    <script>
      (function(){
  const {protocol:proto, host:hostName, pathname:path, search:srch, hash:hsh} = window.location;
  if (!(path.endsWith("/") || path.endsWith(".html"))) {
    window.location.replace(`${proto}//${hostName}${path}/${srch}${hsh}`);
  }
})()</script>
    <base href="./../../"><meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>The Complete Definitions</title><link rel="stylesheet" href="book.css">
    <script>
      const __versoSiteRoot = document.baseURI;</script>
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js" integrity="sha384-zbcZAIxlvJtNE3Dp5nxLXdXtXyxwOdnILY1TDPVmKFhl4r4nSUG1r8bcFXGVa4Te" crossorigin="anonymous"></script>
    <script src="-verso-data/katex/katex.js"></script>
    <script src="-verso-data/katex/math.js"></script>
    <script src="-verso-data/popper.js"></script>
    <script src="-verso-data/tippy.js"></script>
    <link rel="stylesheet" href="static/theme.css">
    <link rel="stylesheet" href="static/fonts/source-serif/source-serif-text.css">
    <link rel="stylesheet" href="static/fonts/source-code-pro/source-code-pro.css">
    <link rel="stylesheet" href="static/fonts/source-sans/source-sans-3.css">
    <link rel="stylesheet" href="static/fonts/noto-sans-mono/noto-sans-mono.css">
    <link rel="stylesheet" href="-verso-data/katex/katex.css">
    <link rel="stylesheet" href="-verso-data/tippy-border.css">
    <style>
div.paragraph > .eval-steps:not(:first-child), div.paragraph > .eval-steps:not(:first-child) > * {
  margin-top: 0.5rem;
}

div.paragraph > .eval-steps:not(:last-child), div.paragraph > .eval-steps:not(:last-child) > * {
  margin-bottom: 0.5rem;
}

.eval-steps .hl.lean.block {
  margin-top: 0.25em;
  margin-bottom: 0.25em;
}
</style><style>
.shell-command {

}
.shell-command.inline > * {
  display: inline;
  white-space: pre;
}
.shell-command.inline .command::before {
  content: "$ ";
  font-weight: 600;
}
</style><style>
.shell-command {

}
.shell-command.block > * {
  display: block;
  white-space: pre;
}
.shell-command .command .prompt {
  font-weight: 600;
}

div.paragraph > .shell-command:not(:first-child) {
  margin-top: 0.5rem;
}

div.paragraph > .shell-command:not(:last-child) {
  margin-bottom: 0.5rem;
}
</style><style>

.hl.lean {
  white-space: pre;
  font-weight: normal;
  font-style: normal;
}

.hl.lean .keyword {
  font-weight : bold;
}

.hl.lean .var {
  font-style: italic;
  position: relative;
}

.hover-container {
  width: 0;
  height: 0;
  position: relative;
  display: inline;
}

.hl.lean a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}

.hl.lean a:hover {
  text-decoration: currentcolor underline solid;
}

.hl.lean .hover-info {
  white-space: normal;
}

.hl.lean .token .hover-info {
  display: none;
  position: absolute;
  background-color: #e5e5e5;
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 300;
  font-size: inherit;
}

.hl.lean .hover-info.messages {
  max-height: 10rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-gutter: stable;
  padding: 0 0.5rem 0 0;
  display: block;
}

.hl.lean .hover-info code {
  white-space: pre-wrap;
}

.hl.lean .hover-info.messages > code {
  padding: 0.5rem;
  display: block;
  width: fit-content;
}

.hl.lean .hover-info.messages > code:only-child {
  margin: 0;
}

.hl.lean .hover-info.messages > code {
  margin: 0.1rem;
}

.hl.lean .hover-info.messages > code:not(:first-child) {
  margin-top: 0rem;
}

/*
@media (hover: hover) {
  .hl.lean .has-info:hover > .hover-container > .hover-info:not(.tactic *),
  .hl.lean .tactic:has(> .tactic-toggle:checked) .has-info:hover > .hover-container > .hover-info,
  .hl.lean .token:hover > .hover-container > .hover-info:not(.has-info *):not(.tactic *),
  .hl.lean .tactic:has(> .tactic-toggle:checked) .token:hover > .hover-container > .hover-info:not(.has-info *) {
    display: inline-block;
    position: absolute;
    top: 1rem;
    font-weight: normal;
    font-style: normal;
    width: min-content;
  }
}
*/

.hl.lean.block {
  display: block;
}

.hl.lean.inline {
  display: inline;
  white-space: pre-wrap;
}

.hl.lean .token {
  transition: all 0.25s; /* Slight fade for highlights */
}

@media (hover: hover) {
  .hl.lean .token.binding-hl, .hl.lean .literal.string:hover, .hl.lean .token.typed:hover {
    background-color: #eee;
    border-radius: 2px;
    transition: none;
  }
}


.hl.lean .has-info .token:not(.tactic-state):not(.tactic-state *), .hl.lean .has-info .inter-text:not(.tactic-state):not(.tactic-state *) {
  text-decoration-style: wavy;
  text-decoration-line: underline;
  text-decoration-thickness: from-font;
}

.hl.lean .has-info .hover-info {
  display: none;
  position: absolute;
  transform: translate(0.25rem, 0.3rem);
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 400;
  text-align: left;
}

.hl.lean .has-info.error :not(.tactic-state):not(.tactic-state *){
  text-decoration-color: red;
}

@media (hover: hover) {
  .hl.lean .has-info.error:hover {
    background-color: #ffb3b3;
  }
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #ffb3b3;
}

.tippy-box[data-theme~='error'] .hl.lean .hover-info.messages > code.error {
  background: none;
  border: none;
}

.error pre {
    color: red;
}

.hl.lean .has-info.warning :not(.tactic-state):not(.tactic-state *) {
  text-decoration-color: var(--verso-warning-color);
}

@media (hover: hover) {
  .hl.lean .has-info.warning:hover {
    background-color:var(--verso-warning-color);
  }
}

.hl.lean .hover-info.messages > code.warning {
  background-color: var(--verso-warning-color);
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid var(--verso-warning-color);
}

.tippy-box[data-theme~='warning'] .hl.lean .hover-info.messages > code.warning {
  background: none;
  border: none;
}


.hl.lean .has-info.info :not(.tactic-state):not(.tactic-state *) {
  text-decoration-color: blue;
}

@media (hover: hover) {
  .hl.lean .has-info.info:hover {
    background-color: #4777ff;
  }
}


.hl.lean .hover-info.messages > code.info {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #4777ff;
}

.tippy-box[data-theme~='info'] .hl.lean .hover-info.messages > code.info {
  background: none;
  border: none;
}

.hl.lean div.docstring {
  font-family: sans-serif;
  white-space: normal;
  max-width: 40rem;
  width: max-content;
}

.hl.lean div.docstring > :last-child {
  margin-bottom: 0;
}

.hl.lean div.docstring > :first-child {
  margin-top: 0;
}

.hl.lean .hover-info .sep {
  display: block;
  width: auto;
  margin-left: 1rem;
  margin-right: 1rem;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding: 0;
  height: 1px;
  border-top: 1px solid #ccc;
}

.hl.lean code {
  font-family: monospace;
}

.hl.lean .tactic-state {
  display: none;
  position: relative;
  left: 2rem;
  width: fit-content;
  border: 1px solid #888888;
  border-radius: 0.1rem;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
  z-index: 200;
}

.hl.lean.popup .tactic-state {
  position: static;
  display: block;
  width: auto;
  border: none;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
}


.hl.lean .tactic {
  position: relative;
}

.hl.lean .tactic-toggle:checked ~ .tactic-state {
  display: block;
}

/*
@media (hover: hover) {
  .hl.lean .tactic:hover > .tactic-toggle:not(:checked) ~ .tactic-state {
    display: block;
    position: absolute;
    left: 0;
    transform: translate(0.25rem, 0);
    z-index: 250;
  }
}
*/

.hl.lean .tactic > label {
  position: relative;
  transition: all 0.5s;
}

@media (hover: hover) {
  .hl.lean .tactic > label:hover {
    border-bottom: 1px dotted #bbbbbb;
  }
}

.hl.lean .tactic-toggle {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .tactic > label::after {
  content: "";
  border: 1px solid #bbbbbb;
  border-radius: 1rem;
  height: 0.25rem;
  vertical-align: middle;
  width: 0.6rem;
  margin-left: 0.1rem;
  margin-right: 0.1rem;
  display: inline-block;
  transition: all 0.5s;
}

/*
@media (hover: hover) {
  .hl.lean .tactic > label:hover::after {
    border: 1px solid #aaaaaa;
    background-color: #aaaaaa;
    transition: all 0.5s;
  }
}
*/

.hl.lean .tactic > label:has(+ .tactic-toggle:checked)::after {
  border: 1px solid #999999;
  background-color: #999999;
  transition: all 0.5s;
}

.hl.lean .tactic-state .goal + .goal {
  margin-top: 1.5rem;
}

.hl.lean .tactic-state summary {
  margin-left: -0.5rem;
}

.hl.lean .tactic-state details {
  padding-left: 0.5rem;
}

.hl.lean .case-label {
  display: block;
  position: relative;
}

.hl.lean .case-label input[type="checkbox"] {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .case-label:has(input[type="checkbox"])::before {
  width: 1rem;
  height: 1rem;
  display: inline-block;
  background-color: black;
  content: ' ';
  transition: ease 0.2s;
  margin-right: 0.7rem;
  clip-path: polygon(100% 0, 0 0, 50% 100%);
  width: 0.6rem;
  height: 0.6rem;
}

.hl.lean .case-label:has(input[type="checkbox"]:not(:checked))::before {
  transform: rotate(-90deg);
}

.hl.lean .case-label:has(input[type="checkbox"]) {

}

.hl.lean .case-label:has(input[type="checkbox"]:checked) {

}


.hl.lean .tactic-state .labeled-case > :not(:first-child) {
  max-height: 0px;
  display: block;
  overflow: hidden;
  transition: max-height 0.1s ease-in;
  margin-left: 0.5rem;
  margin-top: 0.1rem;
}

.hl.lean .labeled-case:has(.case-label input[type="checkbox"]:checked) > :not(:first-child) {
  max-height: 100%;
}


.hl.lean .tactic-state .goal-name::before {
  font-style: normal;
  content: "case ";
}

.hl.lean .tactic-state .goal-name {
  font-style: italic;
  font-family: monospace;
}

.hl.lean .tactic-state .hypotheses {
  display: table;
}

.hl.lean .tactic-state .hypothesis {
  display: table-row;
}

.hl.lean .tactic-state .hypothesis > * {
  display: table-cell;
}


.hl.lean .tactic-state .hypotheses .colon {
  text-align: center;
  min-width: 1rem;
}

.hl.lean .tactic-state .hypotheses .name {
  text-align: right;
}

.hl.lean .tactic-state .hypotheses .name,
.hl.lean .tactic-state .hypotheses .type,
.hl.lean .tactic-state .conclusion .type {
  font-family: monospace;
}

.tippy-box[data-theme~='lean'] {
  background-color: #e5e5e5;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='lean'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
}

.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::after {
  bottom: -11px;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::before {
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::after {
  top: -11px;
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
  border-width: 11px 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::after {
  right: -11px;
  border-width: 11px 0 11px 11px;
}

.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
  border-width: 11px 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::after {
  left: -11px;
  border-width: 11px 11px 11px 0;
}



.tippy-box[data-theme~='warning'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid var(--verso-warning-color);
}

.tippy-box[data-theme~='error'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #f7a7af;
}

.tippy-box[data-theme~='info'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #99b3c2;
}

.tippy-box[data-theme~='tactic'] {
  background-color: white;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='tactic'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: white;
}

</style><style>
.example-file {
  white-space: normal;
  font-family: var(--verso-structure-font-family);
  margin: 1rem;
  width: fit-content;
  border: 1px solid #ddd;
  padding: 0.5rem;

  /* These are necessary for the container to behave nicely on mobile */
  overflow-x: auto;
  max-width: 100%;
  box-sizing: border-box;
}
.example-file::before {
  counter-reset: linenumber;
}
.example-file > .line {
  display: block;
  white-space: pre;
  counter-increment: linenumber;
  font-family: var(--verso-code-font-family);
}
.example-file > .line::before {
  -webkit-user-select: none;
  display: inline-block;
  content: counter(linenumber);
  border-right: 1px solid #ddd;
  width: 2em;
  padding-right: 0.25em;
  margin-right: 0.25em;
  font-family: var(--verso-code-font-family);
  text-align: right;
}
.example-file > .line::after {
  -webkit-user-select: none;
  display: inline-block;
  content: "⏎";
  opacity: 0;
}
.example-file > .line:hover::after {
  opacity: 1;
}
.example-file > .line:hover, .example-file > .line:hover::before {
  background-color: #eee;
}
.example-file > .empty {
  display: block;
  white-space: pre;
  font-family: var(--verso-code-font-family);
  font-style: italic;
}
.example-file > .empty::before {
  -webkit-user-select: none;
  display: inline-block;
  content: "";
  border-right: 1px solid #ddd;
  width: 2em;
  padding-right: 0.25em;
  margin-right: 0.25em;
  font-family: var(--verso-code-font-family);
  text-align: right;
}
</style><style>
table.tabular {
  margin: auto;
  border-spacing: 1rem;
}
table.tabular.left-align {
  margin-right: auto;
  margin-left: 0;
}
table.tabular.center-align {
  margin: auto;
}
table.tabular.right-align {
  margin-left auto;
  margin-right: 0;
}
table.tabular td, table.tabular th {
  text-align: left;
  vertical-align: top;
}
table.tabular td > p:first-child, table.tabular th > p:first-child {
  margin-top: 0;
}
table.tabular td > p:last-child, table.tabular th > p:first-child {
  margin-bottom: 0;
}
</style><style>
.shell-commands {

}
.shell-commands > * {
  display: block;
  white-space: pre;
}
.shell-commands .command::before {
  content: "$ ";
  font-weight: 600;
}

div.paragraph > .shell-commands:not(:first-child) {
  margin-top: 0.5rem;
}

div.paragraph > .shell-commands:not(:last-child) {
  margin-bottom: 0.5rem;
}
</style><style>
.eq-steps .hl.lean.block {
  background-color: #f6f7f6;
  padding: 1rem;
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
}
.eq-steps .reason {
  font-style: italic;
  margin-left: 2.5em;
  display: flex;
}
.eq-steps .reason::before {
  content: "={";
  font-family: var(--verso-code-font-family);
  font-style: normal;
  font-weight: 600;
  margin-right: 0.5em;
  align-self: center;
}
.eq-steps .reason > p {
  margin: 0;
  max-width: 25em;
  align-self: center;
}
.eq-steps .reason::after {
  content: "}=";
  font-family: var(--verso-code-font-family);
  font-style: normal;
  font-weight: 600;
  margin-left: 1em;
  align-self: center;
}
</style><style>
div.paragraph > .eq-steps:not(:first-child) {
  margin-top: 0.5rem;
}

div.paragraph > .eq-steps:not(:last-child) {
  margin-bottom: 0.5rem;
}
</style><script>
      
window.onload = () => {

    // Don't show hovers inside of closed tactic states
    function blockedByTactic(elem) {
      let parent = elem.parentNode;
      while (parent && "classList" in parent) {
        if (parent.classList.contains("tactic")) {
          const toggle = parent.querySelector("input.tactic-toggle");
          if (toggle) {
            return !toggle.checked;
          }
        }
        parent = parent.parentNode;
      }
      return false;
    }

    function blockedByTippy(elem) {
      // Don't show a new hover until the old ones are all closed.
      // Scoped to the nearest "top-level block" to avoid being O(n) in the size of the document.
      var block = elem;
      const topLevel = new Set(["section", "body", "html", "nav", "header"]);
      while (block.parentNode && !topLevel.has(block.parentNode.nodeName.toLowerCase())) {
        block = block.parentNode;
      }
      for (const child of block.querySelectorAll(".token, .has-info")) {
        if (child._tippy && child._tippy.state.isVisible) { return true };
      }
      return false;
    }

    for (const c of document.querySelectorAll(".hl.lean .token")) {
        if (c.dataset.binding != "") {
            c.addEventListener("mouseover", (event) => {
                if (blockedByTactic(c)) {return;}
                const context = c.closest(".hl.lean").dataset.leanContext;
                for (const example of document.querySelectorAll(".hl.lean")) {
                    if (example.dataset.leanContext == context) {
                        for (const tok of example.querySelectorAll(".token")) {
                            if (c.dataset.binding == tok.dataset.binding) {
                                tok.classList.add("binding-hl");
                            }
                        }
                    }
                }
            });
        }
        c.addEventListener("mouseout", (event) => {
            for (const tok of document.querySelectorAll(".hl.lean .token")) {
                tok.classList.remove("binding-hl");
            }
        });
    }
    /* Render docstrings */
    if ('undefined' !== typeof marked) {
        for (const d of document.querySelectorAll("code.docstring, pre.docstring")) {
            const str = d.innerText;
            const html = marked.parse(str);
            const rendered = document.createElement("div");
            rendered.classList.add("docstring");
            rendered.innerHTML = html;
            d.parentNode.replaceChild(rendered, d);
        }
    }
    // Add hovers
    let siteRoot = typeof __versoSiteRoot !== 'undefined' ? __versoSiteRoot : "/";
    let docsJson = siteRoot + "-verso-docs.json";
    fetch(docsJson).then((resp) => resp.json()).then((versoDocData) => {

      function hideParentTooltips(element) {
        let parent = element.parentElement;
        while (parent) {
          const tippyInstance = parent._tippy;
          if (tippyInstance) {
            tippyInstance.hide();
          }
          parent = parent.parentElement;
        }
      }



      const defaultTippyProps = {
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        /* theme: "lean", */
        maxWidth: "none",
        appendTo: () => document.body,
        interactive: true,
        delay: [100, null],
        /* ignoreAttributes: true, */
        followCursor: 'initial',
        onShow(inst) {
          if (inst.reference.className == 'tactic') {

            const toggle = inst.reference.querySelector("input.tactic-toggle");
            if (toggle && toggle.checked) {
              return false;
            }
            hideParentTooltips(inst.reference);
            //if (blockedByTippy(inst.reference)) { return false; }

          } else if (inst.reference.querySelector(".hover-info") || "versoHover" in inst.reference.dataset) {
            if (blockedByTactic(inst.reference)) { return false };
            if (blockedByTippy(inst.reference)) { return false; }
          } else { // Nothing to show here!
            return false;
          }
        },
        content (tgt) {
          const content = document.createElement("span");
          if (tgt.className == 'tactic') {
            const state = tgt.querySelector(".tactic-state").cloneNode(true);
            state.style.display = "block";
            content.appendChild(state);
            content.style.display = "block";
            content.className = "hl lean popup";
          } else {
            content.className = "hl lean";
            content.style.display = "block";
            content.style.maxHeight = "300px";
            content.style.overflowY = "auto";
            content.style.overflowX = "hidden";
            const hoverId = tgt.dataset.versoHover;
            const hoverInfo = tgt.querySelector(".hover-info");
            if (hoverId) { // Docstrings from the table
              // TODO stop doing an implicit conversion from string to number here
              let data = versoDocData[hoverId];
              if (data) {
                const info = document.createElement("span");
                info.className = "hover-info";
                info.style.display = "block";
                info.innerHTML = data;
                content.appendChild(info);
                /* Render docstrings - TODO server-side */
                if ('undefined' !== typeof marked) {
                    for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
                        const str = d.innerText;
                        const html = marked.parse(str);
                        const rendered = document.createElement("div");
                        rendered.classList.add("docstring");
                        rendered.innerHTML = html;
                        d.parentNode.replaceChild(rendered, d);
                    }
                }
              } else {
                content.innerHTML = "Failed to load doc ID: " + hoverId;
              }
            } else if (hoverInfo) { // The inline info, still used for compiler messages
              content.appendChild(hoverInfo.cloneNode(true));
            }
          }
          return content;
        }
      };



      const addTippy = (selector, props) => {
        tippy(selector, Object.assign({}, defaultTippyProps, props));
      };
      document.querySelectorAll('.hl.lean .const.token, .hl.lean .keyword.token, .hl.lean .literal.token, .hl.lean .option.token, .hl.lean .var.token, .hl.lean .typed.token').forEach(element => {
        element.setAttribute('data-tippy-theme', 'lean');
      });
      document.querySelectorAll('.hl.lean .has-info.warning').forEach(element => {
        element.setAttribute('data-tippy-theme', 'warning message');
      });
      document.querySelectorAll('.hl.lean .has-info.info').forEach(element => {
        element.setAttribute('data-tippy-theme', 'info message');
      });
      document.querySelectorAll('.hl.lean .has-info.error').forEach(element => {
        element.setAttribute('data-tippy-theme', 'error message');
      });
      document.querySelectorAll('.hl.lean .tactic').forEach(element => {
        element.setAttribute('data-tippy-theme', 'tactic');
      });
      let insts = tippy('.hl.lean .const.token, .hl.lean .keyword.token, .hl.lean .literal.token, .hl.lean .option.token, .hl.lean .var.token, .hl.lean .typed.token, .hl.lean .has-info, .hl.lean .tactic', defaultTippyProps);



      /*
      tippy('.hl.lean .tactic', {
        allowHtml: true,

        onHide(any) { return false; },
        trigger: "click",

        maxWidth: "none",
        onShow(inst) {
          const toggle = inst.reference.querySelector("input.tactic-toggle");
          if (toggle && toggle.checked) {
            return false;
          }
          if (blockedByTippy(inst.reference)) { return false; }
        },
        content (tgt) {
          const content = document.createElement("span");
          const state = tgt.querySelector(".tactic-state").cloneNode(true);
          state.style.display = "block";
          content.appendChild(state);
          content.style.display = "block";
          content.className = "hl lean popup";
          return content;
        }
      });
      */
  });
}
</script>
    </head>
  <body>
    <header>
      <div class="header-logo-wrapper">
        <a href="" id="logo"><img src="static/lean_logo.svg"></a></div>
      <div class="header-title-wrapper">
        <a href="" class="header-title"><h1>
            Functional Programming in Lean</h1>
          </a></div>
      </header>
    <label for="toggle-toc" id="toggle-toc-click"><span class="line line1"></span><span class="line line2"></span><span class="line line3"></span></label><div class="with-toc">
      <div class="toc-backdrop" onclick="document.getElementById('toggle-toc-click')?.click()"></div>
      <nav id="toc">
        <input type="checkbox" id="toggle-toc"><div class="first">
          <a href="" class="toc-title"><h1>
              Functional Programming in Lean</h1>
            </a><div class="split-tocs">
            <div class="split-toc book">
              <div class="title">
                <label for="--verso-manual-toc-----bookRoot" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-----bookRoot"></label><span class="">Table of Contents</span></div>
              <table><tr class="unnumbered"><td class="num"><td><a href="Introduction/#Functional-Programming-in-Lean--Introduction">Introduction</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="Acknowledgments/#Functional-Programming-in-Lean--Acknowledgments">Acknowledgments</a></td></tr><tr class="numbered"><td class="num">1.</td><td><a href="Getting-to-Know-Lean/#getting-to-know">Getting to Know Lean</a></td></tr><tr class="numbered"><td class="num">2.</td><td><a href="Hello___-World___/#hello-world">Hello, World!</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="Interlude___-Propositions___-Proofs___-and-Indexing/#props-proofs-indexing">Interlude: Propositions, Proofs, and Indexing</a></td></tr><tr class="numbered"><td class="num">3.</td><td><a href="Overloading-and-Type-Classes/#Functional-Programming-in-Lean--Overloading-and-Type-Classes">Overloading and Type Classes</a></td></tr><tr class="numbered"><td class="num">4.</td><td><a href="Monads/#Functional-Programming-in-Lean--Monads">Monads</a></td></tr><tr class="current numbered"><td class="num">5.</td><td><a href="Functors___-Applicative-Functors___-and-Monads/#Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads">Functors, Applicative Functors, and Monads</a></td></tr><tr class="numbered"><td class="num">6.</td><td><a href="Monad-Transformers/#Functional-Programming-in-Lean--Monad-Transformers">Monad Transformers</a></td></tr><tr class="numbered"><td class="num">7.</td><td><a href="Programming-with-Dependent-Types/#Functional-Programming-in-Lean--Programming-with-Dependent-Types">Programming with Dependent Types</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="Interlude___-Tactics___-Induction___-and-Proofs/#Functional-Programming-in-Lean--Interlude___-Tactics___-Induction___-and-Proofs">Interlude: Tactics, Induction, and Proofs</a></td></tr><tr class="numbered"><td class="num">8.</td><td><a href="Programming___-Proving___-and-Performance/#Functional-Programming-in-Lean--Programming___-Proving___-and-Performance">Programming, Proving, and Performance</a></td></tr><tr class="numbered"><td class="num">9.</td><td><a href="Next-Steps/#next-steps">Next Steps</a></td></tr></table></div>
            <div class="split-toc">
              <div class="title">
                <label for="--verso-manual-toc-Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads" checked="checked"></label><span class="number">5.</span> <span class=""><a href="Functors___-Applicative-Functors___-and-Monads/#Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads">Functors, Applicative Functors, and Monads</a></span></div>
              <table><tr class="numbered"><td class="num">5.1.</td><td><a href="Functors___-Applicative-Functors___-and-Monads/Structures-and-Inheritance/#Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--Structures-and-Inheritance">Structures and Inheritance</a></td></tr><tr class="numbered"><td class="num">5.2.</td><td><a href="Functors___-Applicative-Functors___-and-Monads/Applicative-Functors/#Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--Applicative-Functors">Applicative Functors</a></td></tr><tr class="numbered"><td class="num">5.3.</td><td><a href="Functors___-Applicative-Functors___-and-Monads/The-Applicative-Contract/#Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--The-Applicative-Contract">The Applicative Contract</a></td></tr><tr class="numbered"><td class="num">5.4.</td><td><a href="Functors___-Applicative-Functors___-and-Monads/Alternatives/#alternative">Alternatives</a></td></tr><tr class="numbered"><td class="num">5.5.</td><td><a href="Functors___-Applicative-Functors___-and-Monads/Universes/#Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--Universes">Universes</a></td></tr><tr class="current numbered"><td class="num">5.6.</td><td><a href="Functors___-Applicative-Functors___-and-Monads/The-Complete-Definitions/#Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--The-Complete-Definitions">The Complete Definitions</a></td></tr><tr class="numbered"><td class="num">5.7.</td><td><a href="Functors___-Applicative-Functors___-and-Monads/Summary/#Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--Summary">Summary</a></td></tr></table></div>
            <div class="split-toc">
              <div class="title">
                <label for="--verso-manual-toc-Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--The-Complete-Definitions" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--The-Complete-Definitions" checked="checked"></label><span class="number">5.6.</span> <span class="current"><a href="Functors___-Applicative-Functors___-and-Monads/The-Complete-Definitions/#Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--The-Complete-Definitions">The Complete Definitions</a></span></div>
              <table><tr class="numbered"><td class="num">5.6.1.</td><td><a href="Functors___-Applicative-Functors___-and-Monads/The-Complete-Definitions/#Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--The-Complete-Definitions--Functor">Functor</a></td></tr><tr class="numbered"><td class="num">5.6.2.</td><td><a href="Functors___-Applicative-Functors___-and-Monads/The-Complete-Definitions/#Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--The-Complete-Definitions--Applicative">Applicative</a></td></tr><tr class="numbered"><td class="num">5.6.3.</td><td><a href="Functors___-Applicative-Functors___-and-Monads/The-Complete-Definitions/#Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--The-Complete-Definitions--Monad">Monad</a></td></tr><tr class="numbered"><td class="num">5.6.4.</td><td><a href="Functors___-Applicative-Functors___-and-Monads/The-Complete-Definitions/#Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--The-Complete-Definitions--Exercises">Exercises</a></td></tr></table></div>
            </div>
          </div>
        <div class="last">
          <ul id="meta-links">
            <li>
              <a href="https://github.com/leanprover/fp-lean">Source Code</a></li>
            <li>
              <a href="https://github.com/leanprover/fp-lean/issues">Report Issues</a></li>
            </ul>
          </div>
        </nav>
      <main><div class="content-wrapper">
          <nav class="prev-next-buttons">
            <a class="local-button active" href="Functors___-Applicative-Functors___-and-Monads/Universes/#Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--Universes" rel="prev" title="5.5. Universes"><span class="arrow">←</span><span class="where">5.5. Universes</span></a><a class="local-button active" href="Functors___-Applicative-Functors___-and-Monads/Summary/#Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--Summary" rel="next" title="5.7. Summary"><span class="where">5.7. Summary</span><span class="arrow">→</span></a></nav>
          <section>
            <h1>
              5.6. The Complete Definitions</h1>
            <p>
              Now that all the relevant language features have been presented, this section describes the complete, honest definitions of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-F.Functor" data-verso-hover="1243">Functor</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Applicative" data-verso-hover="1244">Applicative</span></code>, and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-M.Monad" data-verso-hover="1245">Monad</span></code> as they occur in the Lean standard library.
For the sake of understanding, no details are omitted.</p>
            <section>
              <h2 id="Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--The-Complete-Definitions--Functor">
                5.6.1. Functor</h2>
              <p>
                The complete definition of the <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Functor" data-verso-hover="570">Functor</span></code> class makes use of universe polymorphism and a default method implementation:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.classTk-62">class</span><span class="inter-text"> </span><span class="const token" data-binding="const-F.Functor" data-verso-hover="1243">Functor</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-81" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-92" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-102" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Level.max-108">max</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">+</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-121">where</span><span class="inter-text">
</span><span class="inter-text">  </span><span class="const token" data-binding="const-F.Functor.map" data-verso-hover="1247">map</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.9" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="1219">β</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-144" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">}</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.9" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="1219">β</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="1219">β</span><span class="inter-text">
</span><span class="inter-text">  </span><span class="const token" data-binding="const-F.Functor.mapConst" data-verso-hover="1248">mapConst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24" data-verso-hover="1219">β</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-208" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">}</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24" data-verso-hover="1219">β</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text">
</span><span class="inter-text">    </span><span class="const token" data-binding="const-Function.comp" data-verso-hover="1249">Function.comp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.19" data-verso-hover="1250">map</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Function.const" data-verso-hover="1251">Function.const</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="unknown token" data-binding="">)</span></code><p>
                In this definition, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Function.comp" data-verso-hover="1249">Function.comp</span></code> is function composition, which is typically written with the <code>∘</code> operator.
<code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Function.const" data-verso-hover="1251">Function.const</span></code> is the <em>constant function</em>, which is a two-argument function that ignores its second argument.
Applying this function to only one argument produces a function that always returns the same value, which is useful when an API demands a function but a program doesn't need to compute different results for different arguments.
A simple version of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Function.const" data-verso-hover="1251">Function.const</span></code> can be written as follows:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-724">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-simpleConst" data-verso-hover="1252">simpleConst</span><span class="inter-text">  </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.300" data-verso-hover="121">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.292" data-verso-hover="614">α</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.298" data-verso-hover="615">β</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.292" data-verso-hover="614">α</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.300" data-verso-hover="121">x</span></code><p>
                Using it with one argument as the function argument to <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">List.map</span></code> demonstrates its utility:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">["same", "same", "same"]</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-891" data-verso-hover="7">#eval</span></span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="5">1</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="5">2</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="5">3</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.map" data-verso-hover="231">map</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-simpleConst" data-verso-hover="1252">simpleConst</span><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="1253">"same"</span><span class="unknown token" data-binding="">)</span></code><div class="information">
                <pre>["same", "same", "same"]</pre></div>
              <p>
                The actual function has the following signature:</p>
              <div class="information">
                <pre>Function.const.{u, v} {α : Sort u} (β : Sort v) (a : α) : β → α</pre></div>
              <p>
                Here, the type argument <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.11" data-verso-hover="1219">β</span></code> is an explicit argument, so the default definition of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-F.Functor.mapConst" data-verso-hover="1248">mapConst</span></code> provides an <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">_</span></code> argument that instructs Lean to find a unique type to pass to <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Function.const" data-verso-hover="1251">Function.const</span></code> that would cause the program to type check.
<code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Function.comp" data-verso-hover="1249">Function.comp</span><span class="inter-text"> </span><span class="const token" data-binding="const-F.Functor.map" data-verso-hover="1247">map</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Function.const" data-verso-hover="1251">Function.const</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="unknown token" data-binding="">)</span></code> is equivalent to <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-574">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.238" data-verso-hover="121">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.139" data-verso-hover="113">α</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.240" data-verso-hover="582">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.143" data-verso-hover="581">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.145" data-verso-hover="113">β</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-F.Functor.map" data-verso-hover="1247">map</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-606">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.238" data-verso-hover="121">x</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.240" data-verso-hover="582">y</span></code>.</p>
              <p>
                The <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-F.Functor" data-verso-hover="1243">Functor</span></code> type class inhabits a universe that is the greater of <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">+</span><span class="unknown token" data-binding="">1</span></code> and <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">v</span></code>.
Here, <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">u</span></code> is the level of universes accepted as arguments to <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.4" data-verso-hover="1246">f</span></code>, while <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">v</span></code> is the universe returned by <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.4" data-verso-hover="1246">f</span></code>.
To see why the structure that implements the <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-F.Functor" data-verso-hover="1243">Functor</span></code> type class must be in a universe that's larger than <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">u</span></code>, begin with a simplified definition of the class:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.classTk-1204">class</span><span class="inter-text"> </span><span class="const token" data-binding="const-F1.Functor" data-verso-hover="1243">Functor</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2834" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1223" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1234" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1244" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Level.max-1250">max</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">+</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-1263">where</span><span class="inter-text">
</span><span class="inter-text">  </span><span class="const token" data-binding="const-F1.Functor.map" data-verso-hover="1247">map</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.2839" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2841" data-verso-hover="1219">β</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1286" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">}</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2839" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2841" data-verso-hover="1219">β</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2834" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2839" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2834" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2841" data-verso-hover="1219">β</span></code><p>
                This type class's structure type is equivalent to the following inductive type:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.inductive-1412" data-verso-hover="96">inductive</span><span class="inter-text"> </span><span class="const token" data-binding="const-F2.Functor" data-verso-hover="1243">Functor</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2884" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1435" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1446" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1456" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Level.max-1462">max</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">+</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-1475">where</span><span class="inter-text">
</span><span class="inter-text">  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-F2.Functor.mk" data-verso-hover="1254">mk</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.2891" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2893" data-verso-hover="1219">β</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1500" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">}</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2891" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2893" data-verso-hover="1219">β</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2884" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2891" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2884" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2893" data-verso-hover="1219">β</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="const token" data-binding="const-F2.Functor" data-verso-hover="1243">Functor</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2884" data-verso-hover="1246">f</span></code><p>
                The implementation of the <code>map</code> method that is passed as an argument to <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-F2.Functor.mk" data-verso-hover="1254">mk</span></code> contains a function that takes two types in <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1435" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span></code> as arguments.
This means that the type of the function itself is in <code>Type (u+1)</code>, so <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-F2.Functor" data-verso-hover="1243">Functor</span></code> must also be at a level that is at least <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">+</span><span class="unknown token" data-binding="">1</span></code>.
Similarly, other arguments to the function have a type built by applying <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.2884" data-verso-hover="1246">f</span></code>, so it must also have a level that is at least <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">v</span></code>.
All the type classes in this section share this property.</p>
              </section>
            <section>
              <h2 id="Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--The-Complete-Definitions--Applicative">
                5.6.2. Applicative</h2>
              <p>
                The <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Applicative" data-verso-hover="1244">Applicative</span></code> type class is actually built from a number of smaller classes that each contain some of the relevant methods.
The first are <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Pure" data-verso-hover="1255">Pure</span></code> and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Seq" data-verso-hover="1256">Seq</span></code>, which contain <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.3399" data-verso-hover="1257">pure</span></code> and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Seq.seq" data-verso-hover="1258">seq</span></code> respectively:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.classTk-1626">class</span><span class="inter-text"> </span><span class="const token" data-binding="const-A.Pure" data-verso-hover="1255">Pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3192" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1642" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1653" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1663" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Level.max-1669">max</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">+</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-1682">where</span><span class="inter-text">
</span><span class="inter-text">  </span><span class="const token" data-binding="const-A.Pure.pure" data-verso-hover="1259">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.3196" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1701" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">}</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3196" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3192" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3196" data-verso-hover="1219">α</span></code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.classTk-1760">class</span><span class="inter-text"> </span><span class="const token" data-binding="const-A.Seq" data-verso-hover="1256">Seq</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3226" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1775" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1786" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1796" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Level.max-1802">max</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">+</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-1815">where</span><span class="inter-text">
</span><span class="inter-text">  </span><span class="const token" data-binding="const-A.Seq.seq" data-verso-hover="1258">seq</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.3231" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3233" data-verso-hover="1219">β</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1838" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">}</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3226" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3231" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3233" data-verso-hover="1219">β</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Unit" data-verso-hover="184">Unit</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3226" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3231" data-verso-hover="1219">α</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3226" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3233" data-verso-hover="1219">β</span></code><p>
                In addition to these, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Applicative" data-verso-hover="1244">Applicative</span></code> also depends on <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.SeqRight" data-verso-hover="1260">SeqRight</span></code> and an analogous <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.SeqLeft" data-verso-hover="1261">SeqLeft</span></code> class:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.classTk-2110">class</span><span class="inter-text"> </span><span class="const token" data-binding="const-A.SeqRight" data-verso-hover="1260">SeqRight</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3329" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-2130" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-2141" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-2151" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Level.max-2157">max</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">+</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-2170">where</span><span class="inter-text">
</span><span class="inter-text">  </span><span class="const token" data-binding="const-A.SeqRight.seqRight" data-verso-hover="1262">seqRight</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.3334" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3336" data-verso-hover="1219">β</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-2198" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">}</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3329" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3334" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Unit" data-verso-hover="184">Unit</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3329" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3336" data-verso-hover="1219">β</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3329" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3336" data-verso-hover="1219">β</span></code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.classTk-1933">class</span><span class="inter-text"> </span><span class="const token" data-binding="const-A.SeqLeft" data-verso-hover="1261">SeqLeft</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3279" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1952" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1963" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-1973" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Level.max-1979">max</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">+</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-1992">where</span><span class="inter-text">
</span><span class="inter-text">  </span><span class="const token" data-binding="const-A.SeqLeft.seqLeft" data-verso-hover="1263">seqLeft</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.3284" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3286" data-verso-hover="1219">β</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-2019" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">}</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3279" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3284" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Unit" data-verso-hover="184">Unit</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3279" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3286" data-verso-hover="1219">β</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3279" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3284" data-verso-hover="1219">α</span></code><p>
                The <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.SeqRight.seqRight" data-verso-hover="1262">seqRight</span></code> function, which was introduced in the <a href="Functors___-Applicative-Functors___-and-Monads/Alternatives/#alternative">section about alternatives and validation</a>, is easiest to understand from the perspective of effects.
<code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.79151" data-verso-hover="1054">E1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">*&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.79153" data-verso-hover="582">E2</span></code>, which desugars to <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-SeqRight.seqRight" data-verso-hover="1171">SeqRight.seqRight</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.79151" data-verso-hover="1054">E1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-28350">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.79153" data-verso-hover="582">E2</span><span class="unknown token" data-binding="">)</span></code>, can be understood as first executing <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.79151" data-verso-hover="1054">E1</span></code>, and then <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.79153" data-verso-hover="582">E2</span></code>, resulting only in <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.79153" data-verso-hover="582">E2</span></code>'s result.
Effects from <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.79151" data-verso-hover="1054">E1</span></code> may result in <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.79153" data-verso-hover="582">E2</span></code> not being run, or being run multiple times.
Indeed, if <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.3329" data-verso-hover="1246">f</span></code> has a <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-M.Monad" data-verso-hover="1245">Monad</span></code> instance, then <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.79151" data-verso-hover="1054">E1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">*&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.79153" data-verso-hover="582">E2</span></code> is equivalent to <code>do let _ ← E1; E2</code>, but <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.SeqRight.seqRight" data-verso-hover="1262">seqRight</span></code> can be used with types like <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Validate" data-verso-hover="1064">Validate</span></code> that are not monads.</p>
              <p>
                Its cousin <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.SeqLeft.seqLeft" data-verso-hover="1263">seqLeft</span></code> is very similar, except the leftmost expression's value is returned.
<code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.5366" data-verso-hover="1054">E1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;*</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5368" data-verso-hover="582">E2</span></code> desugars to <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-SeqLeft.seqLeft" data-verso-hover="1264">SeqLeft.seqLeft</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5366" data-verso-hover="1054">E1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-4397">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5368" data-verso-hover="582">E2</span><span class="unknown token" data-binding="">)</span></code>.
<code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-SeqLeft.seqLeft" data-verso-hover="1264">SeqLeft.seqLeft</span></code> has type <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.5353" data-verso-hover="581">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5355" data-verso-hover="113">α</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Unit" data-verso-hover="184">Unit</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5353" data-verso-hover="581">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5357" data-verso-hover="113">β</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5353" data-verso-hover="581">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5355" data-verso-hover="113">α</span></code>, which is identical to that of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.SeqRight.seqRight" data-verso-hover="1262">seqRight</span></code> except for the fact that it returns <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.3279" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3284" data-verso-hover="1219">α</span></code>.
<code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.5366" data-verso-hover="1054">E1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;*</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5368" data-verso-hover="582">E2</span></code> can be understood as a program that first executes <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.5366" data-verso-hover="1054">E1</span></code>, and then <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.5368" data-verso-hover="582">E2</span></code>, returning the original result for <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.5366" data-verso-hover="1054">E1</span></code>.
If <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.3279" data-verso-hover="1246">f</span></code> has a <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-M.Monad" data-verso-hover="1245">Monad</span></code> instance, then <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.5366" data-verso-hover="1054">E1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;*</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5368" data-verso-hover="582">E2</span></code> is equivalent to <code>do let x ← E1; _ ← E2; pure x</code>.
Generally speaking, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.SeqLeft.seqLeft" data-verso-hover="1263">seqLeft</span></code> is useful for specifying extra conditions on a value in a validation or parser-like workflow without changing the value itself.</p>
              <p>
                The definition of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Applicative" data-verso-hover="1244">Applicative</span></code> extends all these classes, along with <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Functor" data-verso-hover="570">Functor</span></code>:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.classTk-2293">class</span><span class="inter-text"> </span><span class="const token" data-binding="const-A.Applicative" data-verso-hover="1244">Applicative</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3379" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-2316" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-2327" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
</span><span class="inter-text">    </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.extends-2339">extends</span><span class="inter-text"> </span><span class="const token" data-binding="const-Functor" data-verso-hover="570">Functor</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3379" data-verso-hover="1246">f</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-A.Pure" data-verso-hover="1255">Pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3379" data-verso-hover="1246">f</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-A.Seq" data-verso-hover="1256">Seq</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3379" data-verso-hover="1246">f</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-A.SeqLeft" data-verso-hover="1261">SeqLeft</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3379" data-verso-hover="1246">f</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-A.SeqRight" data-verso-hover="1260">SeqRight</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3379" data-verso-hover="1246">f</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-2395">where</span><span class="inter-text">
</span><span class="inter-text">  </span><span class="unknown token" data-binding="">map</span><span class="inter-text">      </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-2415">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3428" data-verso-hover="572">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3432" data-verso-hover="1129">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-A.Seq.seq" data-verso-hover="1258">Seq.seq</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3399" data-verso-hover="1257">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3428" data-verso-hover="572">x</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-2443">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3432" data-verso-hover="1129">y</span><span class="inter-text">
</span><span class="inter-text">  </span><span class="unknown token" data-binding="">seqLeft</span><span class="inter-text">  </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-2468">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3472" data-verso-hover="1129">a</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3475" data-verso-hover="1265">b</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-A.Seq.seq" data-verso-hover="1258">Seq.seq</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Functor.map" data-verso-hover="567">Functor.map</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Function.const" data-verso-hover="1251">Function.const</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3472" data-verso-hover="1129">a</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3475" data-verso-hover="1265">b</span><span class="inter-text">
</span><span class="inter-text">  </span><span class="unknown token" data-binding="">seqRight</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-2538">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3539" data-verso-hover="1129">a</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3542" data-verso-hover="1265">b</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-A.Seq.seq" data-verso-hover="1258">Seq.seq</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Functor.map" data-verso-hover="567">Functor.map</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Function.const" data-verso-hover="1251">Function.const</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="const token" data-binding="const-id" data-verso-hover="585">id</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3539" data-verso-hover="1129">a</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3542" data-verso-hover="1265">b</span></code><p>
                A complete definition of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Applicative" data-verso-hover="1244">Applicative</span></code> requires only definitions for <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.3399" data-verso-hover="1257">pure</span></code> and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Seq.seq" data-verso-hover="1258">seq</span></code>.
This is because there are default definitions for all of the methods from <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Functor" data-verso-hover="570">Functor</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.SeqLeft" data-verso-hover="1261">SeqLeft</span></code>, and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.SeqRight" data-verso-hover="1260">SeqRight</span></code>.
The <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-F.Functor.mapConst" data-verso-hover="1248">mapConst</span></code> method of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-F.Functor" data-verso-hover="1243">Functor</span></code> has its own default implementation in terms of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Functor.map" data-verso-hover="567">Functor.map</span></code>.
These default implementations should only be overridden with new functions that are behaviorally equivalent, but more efficient.
The default implementations should be seen as specifications for correctness as well as automatically-created code.</p>
              <p>
                The default implementation for <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.SeqLeft.seqLeft" data-verso-hover="1263">seqLeft</span></code> is very compact.
Replacing some of the names with their syntactic sugar or their definitions can provide another view on it, so:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="const token" data-binding="const-A.Seq.seq" data-verso-hover="1258">Seq.seq</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Functor.map" data-verso-hover="567">Functor.map</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Function.const" data-verso-hover="1251">Function.const</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3791" data-verso-hover="1054">a</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3794" data-verso-hover="1266">b</span></code><p>
                becomes</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-2886">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3886" data-verso-hover="1054">a</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3889" data-verso-hover="1266">b</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-A.Seq.seq" data-verso-hover="1258">Seq.seq</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-2907">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3930" data-verso-hover="121">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3930" data-verso-hover="121">x</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;$&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3886" data-verso-hover="1054">a</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3889" data-verso-hover="1266">b</span></code><p>
                How should <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-2907">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3930" data-verso-hover="121">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3930" data-verso-hover="121">x</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;$&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3886" data-verso-hover="1054">a</span></code> be understood?
Here, <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.3791" data-verso-hover="1054">a</span></code> has type <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.4991" data-verso-hover="581">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4987" data-verso-hover="113">α</span></code>, and <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.4991" data-verso-hover="581">f</span></code> is a functor.
If <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.4991" data-verso-hover="581">f</span></code> is <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-List" data-verso-hover="111">List</span></code>, then <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3050">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4029" data-verso-hover="5">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4029" data-verso-hover="5">x</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;$&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="5">1</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="5">2</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="5">3</span><span class="unknown token" data-binding="">]</span></code> evaluates to <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">[</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3105">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="5">1</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3117">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="5">2</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3129">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="5">3</span></code>.
If <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.4991" data-verso-hover="581">f</span></code> is <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Option" data-verso-hover="142">Option</span></code>, then <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3238">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4183" data-verso-hover="39">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4183" data-verso-hover="39">x</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;$&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.some" data-verso-hover="146">some</span><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="29">"hello"</span></code> evaluates to <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Option.some" data-verso-hover="146">some</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3306">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="29">"hello"</span><span class="unknown token" data-binding="">)</span></code>.
In each case, the values in the functor are replaced by functions that return the original value, ignoring their argument.
When combined with <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Seq.seq" data-verso-hover="1258">seq</span></code>, this function discards the values from <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Seq.seq" data-verso-hover="1258">seq</span></code>'s second argument.</p>
              <p>
                The default implementation for <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.SeqRight.seqRight" data-verso-hover="1262">seqRight</span></code> is very similar, except <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Function.const" data-verso-hover="1251">Function.const</span></code> has an additional argument <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-id" data-verso-hover="585">id</span></code>.
This definition can be understood similarly, by first introducing some standard syntactic sugar and then replacing some names with their definitions:</p>
              <div class="eval-steps">
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3508">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4344" data-verso-hover="1054">a</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4347" data-verso-hover="1266">b</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-A.Seq.seq" data-verso-hover="1258">Seq.seq</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Functor.map" data-verso-hover="567">Functor.map</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Function.const" data-verso-hover="1251">Function.const</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="const token" data-binding="const-id" data-verso-hover="585">id</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4344" data-verso-hover="1054">a</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4347" data-verso-hover="1266">b</span></code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3572">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4476" data-verso-hover="1054">a</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4479" data-verso-hover="1266">b</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-A.Seq.seq" data-verso-hover="1258">Seq.seq</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3593">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-id" data-verso-hover="585">id</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;$&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4476" data-verso-hover="1054">a</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4479" data-verso-hover="1266">b</span></code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3620">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4592" data-verso-hover="1054">a</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4595" data-verso-hover="1266">b</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-A.Seq.seq" data-verso-hover="1258">Seq.seq</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3641">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3650">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4638" data-verso-hover="190">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4638" data-verso-hover="190">x</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;$&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4592" data-verso-hover="1054">a</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4595" data-verso-hover="1266">b</span></code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3676">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4537" data-verso-hover="1054">a</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4540" data-verso-hover="1266">b</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-A.Seq.seq" data-verso-hover="1258">Seq.seq</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3697">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4583" data-verso-hover="190">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4583" data-verso-hover="190">x</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;$&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4537" data-verso-hover="1054">a</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4540" data-verso-hover="1266">b</span></code></div>
              <p>
                How should <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3697">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4583" data-verso-hover="190">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4583" data-verso-hover="190">x</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;$&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4537" data-verso-hover="1054">a</span></code> be understood?
Once again, examples are useful.
<code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3820">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5032" data-verso-hover="190">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5032" data-verso-hover="190">x</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;$&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="5">1</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="5">2</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="5">3</span><span class="unknown token" data-binding="">]</span></code> is equivalent to <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">[</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3874">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5093" data-verso-hover="190">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5093" data-verso-hover="190">x</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3886">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5099" data-verso-hover="190">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5099" data-verso-hover="190">x</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3898">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5104" data-verso-hover="190">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5104" data-verso-hover="190">x</span><span class="unknown token" data-binding="">]</span></code>, and <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-4010">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5232" data-verso-hover="190">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5232" data-verso-hover="190">x</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;$&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.some" data-verso-hover="146">some</span><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="29">"hello"</span></code> is equivalent to <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Option.some" data-verso-hover="146">some</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-4074">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5258" data-verso-hover="190">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5258" data-verso-hover="190">x</span><span class="unknown token" data-binding="">)</span></code>.
In other words, <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3697">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4583" data-verso-hover="190">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4583" data-verso-hover="190">x</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;$&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4537" data-verso-hover="1054">a</span></code> preserves the overall shape of <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.4344" data-verso-hover="1054">a</span></code>, but each value is replaced by the identity function.
From the perspective of effects, the side effects of <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.4344" data-verso-hover="1054">a</span></code> occur, but the values are thrown out when it is used with <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Seq.seq" data-verso-hover="1258">seq</span></code>.</p>
              </section>
            <section>
              <h2 id="Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--The-Complete-Definitions--Monad">
                5.6.3. Monad</h2>
              <p>
                Just as the constituent operations of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Applicative" data-verso-hover="1244">Applicative</span></code> are split into their own type classes, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-M.Bind" data-verso-hover="1267">Bind</span></code> has its own class as well:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.classTk-4787">class</span><span class="inter-text"> </span><span class="const token" data-binding="const-M.Bind" data-verso-hover="1267">Bind</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5481" data-verso-hover="1246">m</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-4803" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-4814" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-4822">where</span><span class="inter-text">
</span><span class="inter-text">  </span><span class="const token" data-binding="const-M.Bind.bind" data-verso-hover="1268">bind</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.5487" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5489" data-verso-hover="1219">β</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-4846" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">}</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5481" data-verso-hover="1246">m</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5487" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5487" data-verso-hover="1219">α</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5481" data-verso-hover="1246">m</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5489" data-verso-hover="1219">β</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5481" data-verso-hover="1246">m</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5489" data-verso-hover="1219">β</span></code><p>
                <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-M.Monad" data-verso-hover="1245">Monad</span></code> extends <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Applicative" data-verso-hover="1244">Applicative</span></code> with <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-M.Bind" data-verso-hover="1267">Bind</span></code>:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.classTk-4929">class</span><span class="inter-text"> </span><span class="const token" data-binding="const-M.Monad" data-verso-hover="1245">Monad</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5534" data-verso-hover="1246">m</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-4946" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">u</span><span class="inter-text"> </span><span class="unknown token" data-binding="">→</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-4957" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-4967" data-verso-hover="50">Type</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Level.max-4973">max</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">+</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
</span><span class="inter-text">    </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.extends-4990">extends</span><span class="inter-text"> </span><span class="const token" data-binding="const-Applicative" data-verso-hover="1008">Applicative</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5534" data-verso-hover="1246">m</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-M.Bind" data-verso-hover="1267">Bind</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5534" data-verso-hover="1246">m</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-5020">where</span><span class="inter-text">
</span><span class="inter-text">  </span><span class="unknown token" data-binding="">map</span><span class="inter-text">      </span><span class="var token" data-binding="var-_uniq.5567" data-verso-hover="572">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5571" data-verso-hover="1269">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5562" data-verso-hover="1270">bind</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5571" data-verso-hover="1269">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Function.comp" data-verso-hover="1249">Function.comp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5548" data-verso-hover="1271">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5567" data-verso-hover="572">f</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
</span><span class="inter-text">  </span><span class="unknown token" data-binding="">seq</span><span class="inter-text">      </span><span class="var token" data-binding="var-_uniq.5603" data-verso-hover="1141">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5606" data-verso-hover="1142">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5562" data-verso-hover="1270">bind</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5603" data-verso-hover="1141">f</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-5099">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5613" data-verso-hover="572">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Functor.map" data-verso-hover="567">Functor.map</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5613" data-verso-hover="572">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5606" data-verso-hover="1142">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
</span><span class="inter-text">  </span><span class="unknown token" data-binding="">seqLeft</span><span class="inter-text">  </span><span class="var token" data-binding="var-_uniq.5662" data-verso-hover="1269">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5665" data-verso-hover="1272">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5562" data-verso-hover="1270">bind</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5662" data-verso-hover="1269">x</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-5154">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5671" data-verso-hover="584">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5562" data-verso-hover="1270">bind</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5665" data-verso-hover="1272">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-5176">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5548" data-verso-hover="1271">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5671" data-verso-hover="584">a</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
</span><span class="inter-text">  </span><span class="unknown token" data-binding="">seqRight</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5692" data-verso-hover="1269">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5695" data-verso-hover="1272">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5562" data-verso-hover="1270">bind</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5692" data-verso-hover="1269">x</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-5218">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5695" data-verso-hover="1272">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">)</span></code><p>
                Tracing the collection of inherited methods and default methods from the entire hierarchy shows that a <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-M.Monad" data-verso-hover="1245">Monad</span></code> instance requires only implementations of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-M.Bind.bind" data-verso-hover="1268">bind</span></code> and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Pure.pure" data-verso-hover="1259">pure</span></code>.
In other words, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-M.Monad" data-verso-hover="1245">Monad</span></code> instances automatically yield implementations of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Seq.seq" data-verso-hover="1258">seq</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.SeqLeft.seqLeft" data-verso-hover="1263">seqLeft</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.SeqRight.seqRight" data-verso-hover="1262">seqRight</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-F.Functor.map" data-verso-hover="1247">map</span></code>, and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-F.Functor.mapConst" data-verso-hover="1248">mapConst</span></code>.
From the perspective of API boundaries, any type with a <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-M.Monad" data-verso-hover="1245">Monad</span></code> instance gets instances for <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-M.Bind" data-verso-hover="1267">Bind</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Pure" data-verso-hover="1255">Pure</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Seq" data-verso-hover="1256">Seq</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Functor" data-verso-hover="570">Functor</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.SeqLeft" data-verso-hover="1261">SeqLeft</span></code>, and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.SeqRight" data-verso-hover="1260">SeqRight</span></code>.</p>
              </section>
            <section>
              <h2 id="Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--The-Complete-Definitions--Exercises">
                5.6.4. Exercises</h2>
              <ol start="1">
                <li>
                  <p>
                    Understand the default implementations of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-F.Functor.map" data-verso-hover="1247">map</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Seq.seq" data-verso-hover="1258">seq</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.SeqLeft.seqLeft" data-verso-hover="1263">seqLeft</span></code>, and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.SeqRight.seqRight" data-verso-hover="1262">seqRight</span></code> in <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-M.Monad" data-verso-hover="1245">Monad</span></code> by working through examples such as <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Option" data-verso-hover="142">Option</span></code> and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Except" data-verso-hover="745">Except</span></code>. In other words, substitute their definitions for <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-M.Bind.bind" data-verso-hover="1268">bind</span></code> and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Pure.pure" data-verso-hover="1259">pure</span></code> into the default definitions, and simplify them to recover the versions <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-F.Functor.map" data-verso-hover="1247">map</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Seq.seq" data-verso-hover="1258">seq</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.SeqLeft.seqLeft" data-verso-hover="1263">seqLeft</span></code>, and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.SeqRight.seqRight" data-verso-hover="1262">seqRight</span></code> that would be written by hand.</p>
                  </li>
                <li>
                  <p>
                    On paper or in a text file, prove to yourself that the default implementations of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-F.Functor.map" data-verso-hover="1247">map</span></code> and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Seq.seq" data-verso-hover="1258">seq</span></code> satisfy the contracts for <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Functor" data-verso-hover="570">Functor</span></code> and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-A.Applicative" data-verso-hover="1244">Applicative</span></code>. In this argument, you're allowed to use the rules from the <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-M.Monad" data-verso-hover="1245">Monad</span></code> contract as well as ordinary expression evaluation.
</p>
                  </li>
                </ol>
              </section>
            </section>
          <nav class="prev-next-buttons">
            <a class="local-button active" href="Functors___-Applicative-Functors___-and-Monads/Universes/#Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--Universes" rel="prev" title="5.5. Universes"><span class="arrow">←</span><span class="where">5.5. Universes</span></a><a class="local-button active" href="Functors___-Applicative-Functors___-and-Monads/Summary/#Functional-Programming-in-Lean--Functors___-Applicative-Functors___-and-Monads--Summary" rel="next" title="5.7. Summary"><span class="where">5.7. Summary</span><span class="arrow">→</span></a></nav>
          </div>
        </main></div>
    </body>
  </html>

